package com.dgreenproductions.cashclock;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.time.Duration;
import java.time.Instant;
import java.time.temporal.ChronoUnit;
import java.util.ArrayList;

import static org.fest.assertions.Assertions.assertThat;

public class InMemoryTimeLogTest {
    private InMemoryTimeLog timeLog;

    @BeforeEach
    public void beforeEach() {
        timeLog = new InMemoryTimeLog(new ArrayList<>(), (from, to) -> {

        });
    }

    @Test
    public void canGetTotalTimeWhenOnlyTimeLoggedIsOutsideTheWindow() {
        Instant start = Instant.parse("2018-05-12T20:59:59.123Z");
        Instant end = start.plus(Duration.ofMinutes(2));
        timeLog.log(start, end);

        Instant windowStart = Instant.parse("2022-04-26T00:00:00Z");
        Instant windowEnd = Instant.parse("2022-04-26T23:59:59Z");
        assertThat(timeLog.getTotalTime(windowStart, windowEnd)).isEqualTo(Duration.ZERO);
    }

    @Test
    public void canGetTotalTimeOfSingleLogEntry() {
        Instant start = Instant.parse("2018-05-12T20:59:59.000Z");
        Instant end = start.plus(Duration.ofMinutes(1));
        timeLog.log(start, end);
        assertThat(timeLog.getTotalTime(start, end)).isEqualTo(Duration.ofMinutes(1));
    }

    @Test
    public void canGetTotalTimeWhenWindowIsWiderThanSingleEntry() {
        Instant start = Instant.now();
        Instant end = start.plus(Duration.ofMinutes(1));
        timeLog.log(start, end);
        assertThat(timeLog.getTotalTime(start.minus(Duration.ofSeconds(1)), end.plus(Duration.ofSeconds(1)))).isEqualTo(Duration.ofMinutes(1));
    }

    @Test
    public void canGetTotalTimeWhenWindowIsNarrowerThanSingleEntry() {
        Instant start = Instant.now();
        Instant end = start.plus(Duration.ofMinutes(1));
        timeLog.log(start, end);
        assertThat(timeLog.getTotalTime(start.plus(Duration.ofSeconds(1)), end.minus(Duration.ofSeconds(1)))).isEqualTo(Duration.ofSeconds(58));
    }

    @Test
    public void canGetTotalOfMultipleEntries() {
        Instant start = Instant.parse("2018-05-12T20:59:59.000Z");
        timeLog.log(start, start.plus(Duration.ofSeconds(20)));
        timeLog.log(start.plus(Duration.ofSeconds(30)), start.plus(Duration.ofSeconds(34)));
        assertThat(timeLog.getTotalTime(start, start.plus(Duration.ofSeconds(34)))).isEqualTo(Duration.ofSeconds(24));
    }

    @Test
    public void cannotLogZeroDuration() {
        Instant instant = Instant.now();
        Assertions.assertThrows(IllegalArgumentException.class, () -> {
            timeLog.log(instant, instant);
        });
    }

    @Test
    public void cannotLogNegativeDuration() {
        Instant from = Instant.now().truncatedTo(ChronoUnit.SECONDS);
        Instant to = from.plus(Duration.ofMillis(999));
        Assertions.assertThrows(IllegalArgumentException.class, () -> {
            timeLog.log(to, from);
        });
    }

    @Test
    public void logHandlesMillioseconds() throws IOException {
        Instant from = Instant.parse("2018-05-12T20:59:59.123Z");
        Instant to = Instant.parse("2018-05-12T21:00:58.456Z");
        timeLog.log(from, to);
        assertThat(timeLog.getTotalTime(from, to)).isEqualTo(Duration.ofMillis(59333));
    }

    @Test
    public void blah() {
        addToLog("2022-04-26T06:58:13.062736Z",  "2022-04-26T06:59:13.062736Z");
        addToLog("2022-04-26T06:58:34.062736Z",  "2022-04-26T06:59:34.062736Z");
        addToLog("2022-04-26T06:59:03.062736Z",  "2022-04-26T07:00:03.062736Z");
        addToLog("2022-04-26T06:59:13.062736Z",  "2022-04-26T07:00:13.062736Z");
        addToLog("2022-04-26T06:59:34.062736Z",  "2022-04-26T07:00:34.062736Z");
        addToLog("2022-04-26T07:00:03.062736Z",  "2022-04-26T07:01:03.062736Z");
        addToLog("2022-04-26T07:00:13.062736Z",  "2022-04-26T07:01:13.062736Z");
        addToLog("2022-04-26T07:00:34.062736Z",  "2022-04-26T07:01:34.062736Z");
        addToLog("2022-04-26T07:01:51.86249Z",  "2022-04-26T07:02:51.86249Z");
        addToLog("2022-04-26T07:02:51.86249Z",  "2022-04-26T07:03:51.86249Z");
        addToLog("2022-04-26T07:03:51.86249Z",  "2022-04-26T07:04:51.86249Z");
        addToLog("2022-04-26T07:04:51.86249Z",  "2022-04-26T07:05:51.86249Z");
        addToLog("2022-04-26T07:05:51.86249Z",  "2022-04-26T07:06:51.86249Z");
        addToLog("2022-04-26T07:06:51.86249Z",  "2022-04-26T07:07:51.86249Z");
        addToLog("2022-04-26T07:07:51.86249Z",  "2022-04-26T07:08:51.86249Z");
        addToLog("2022-04-26T07:08:51.86249Z",  "2022-04-26T07:09:51.86249Z");
        addToLog("2022-04-26T07:09:51.86249Z",  "2022-04-26T07:10:51.86249Z");
        addToLog("2022-04-26T07:10:51.86249Z",  "2022-04-26T07:11:04.86249Z");
        addToLog("2022-04-26T07:21:51.86249Z",  "2022-04-26T07:22:51.86249Z");
        addToLog("2022-04-26T07:22:49.86249Z",  "2022-04-26T07:23:49.86249Z");
        addToLog("2022-04-26T07:22:51.86249Z",  "2022-04-26T07:23:51.86249Z");
        addToLog("2022-04-26T07:23:49.86249Z",  "2022-04-26T07:24:49.86249Z");
        addToLog("2022-04-26T07:23:51.86249Z",  "2022-04-26T07:24:51.86249Z");
        addToLog("2022-04-26T07:24:49.86249Z",  "2022-04-26T07:25:49.86249Z");
        addToLog("2022-04-26T07:24:51.86249Z",  "2022-04-26T07:25:51.86249Z");
        addToLog("2022-04-26T07:25:49.86249Z",  "2022-04-26T07:26:49.86249Z");
        addToLog("2022-04-26T07:25:51.86249Z",  "2022-04-26T07:26:51.86249Z");
        addToLog("2022-04-26T07:26:49.86249Z",  "2022-04-26T07:27:49.86249Z");
        addToLog("2022-04-26T07:26:51.86249Z",  "2022-04-26T07:27:51.86249Z");
        addToLog("2022-04-26T07:27:49.86249Z",  "2022-04-26T07:28:49.86249Z");
        addToLog("2022-04-26T07:27:51.86249Z",  "2022-04-26T07:28:51.86249Z");
        addToLog("2022-04-26T07:28:49.86249Z",  "2022-04-26T07:29:49.86249Z");
        addToLog("2022-04-26T07:28:51.86249Z",  "2022-04-26T07:29:51.86249Z");
        addToLog("2022-04-26T07:29:49.86249Z",  "2022-04-26T07:30:49.86249Z");
        addToLog("2022-04-26T07:29:51.86249Z",  "2022-04-26T07:30:51.86249Z");
        addToLog("2022-04-26T07:30:49.86249Z",  "2022-04-26T07:31:49.86249Z");
        addToLog("2022-04-26T07:30:51.86249Z",  "2022-04-26T07:31:51.86249Z");
        addToLog("2022-04-26T07:31:49.86249Z",  "2022-04-26T07:32:49.86249Z");
        addToLog("2022-04-26T07:31:51.86249Z",  "2022-04-26T07:32:51.86249Z");
        addToLog("2022-04-26T07:32:49.86249Z",  "2022-04-26T07:33:49.86249Z");
        addToLog("2022-04-26T07:32:51.86249Z",  "2022-04-26T07:33:51.86249Z");
        addToLog("2022-04-26T07:33:49.86249Z",  "2022-04-26T07:34:49.86249Z");
        addToLog("2022-04-26T07:33:51.86249Z",  "2022-04-26T07:34:51.86249Z");
        addToLog("2022-04-26T07:34:49.86249Z",  "2022-04-26T07:35:49.86249Z");
        addToLog("2022-04-26T07:34:51.86249Z",  "2022-04-26T07:35:51.86249Z");
        addToLog("2022-04-26T07:35:49.86249Z",  "2022-04-26T07:36:49.86249Z");
        addToLog("2022-04-26T07:35:51.86249Z",  "2022-04-26T07:36:51.86249Z");
        addToLog("2022-04-26T07:36:49.86249Z",  "2022-04-26T07:37:49.86249Z");
        addToLog("2022-04-26T07:36:51.86249Z",  "2022-04-26T07:37:51.86249Z");
        addToLog("2022-04-26T07:37:49.86249Z",  "2022-04-26T07:38:49.86249Z");
        addToLog("2022-04-26T07:37:51.86249Z",  "2022-04-26T07:38:51.86249Z");
        addToLog("2022-04-26T07:38:49.86249Z",  "2022-04-26T07:39:49.86249Z");
        addToLog("2022-04-26T07:38:51.86249Z",  "2022-04-26T07:39:51.86249Z");
        addToLog("2022-04-26T07:39:49.86249Z",  "2022-04-26T07:40:49.86249Z");
        addToLog("2022-04-26T07:39:51.86249Z",  "2022-04-26T07:40:51.86249Z");
        addToLog("2022-04-26T07:40:49.86249Z",  "2022-04-26T07:41:49.86249Z");
        addToLog("2022-04-26T07:40:51.86249Z",  "2022-04-26T07:41:51.86249Z");
        addToLog("2022-04-26T07:41:49.86249Z",  "2022-04-26T07:42:49.86249Z");
        addToLog("2022-04-26T07:41:51.86249Z",  "2022-04-26T07:42:51.86249Z");
        addToLog("2022-04-26T07:42:49.86249Z",  "2022-04-26T07:43:49.86249Z");
        addToLog("2022-04-26T07:42:51.86249Z",  "2022-04-26T07:43:51.86249Z");
        addToLog("2022-04-26T07:43:49.86249Z",  "2022-04-26T07:44:49.86249Z");
        addToLog("2022-04-26T07:43:51.86249Z",  "2022-04-26T07:44:51.86249Z");
        addToLog("2022-04-26T07:44:49.86249Z",  "2022-04-26T07:45:49.86249Z");
        addToLog("2022-04-26T07:44:51.86249Z",  "2022-04-26T07:45:51.86249Z");
        addToLog("2022-04-26T07:45:49.86249Z",  "2022-04-26T07:46:49.86249Z");
        addToLog("2022-04-26T07:45:51.86249Z",  "2022-04-26T07:46:51.86249Z");
        addToLog("2022-04-26T07:46:49.86249Z",  "2022-04-26T07:47:49.86249Z");
        addToLog("2022-04-26T07:46:51.86249Z",  "2022-04-26T07:47:51.86249Z");
        addToLog("2022-04-26T07:47:49.86249Z",  "2022-04-26T07:48:49.86249Z");
        addToLog("2022-04-26T07:47:51.86249Z",  "2022-04-26T07:48:51.86249Z");
        addToLog("2022-04-26T07:48:49.86249Z",  "2022-04-26T07:49:49.86249Z");
        addToLog("2022-04-26T07:48:51.86249Z",  "2022-04-26T07:49:51.86249Z");
        addToLog("2022-04-26T07:49:49.86249Z",  "2022-04-26T07:50:49.86249Z");
        addToLog("2022-04-26T07:49:51.86249Z",  "2022-04-26T07:50:51.86249Z");
        addToLog("2022-04-26T07:50:49.86249Z",  "2022-04-26T07:51:49.86249Z");
        addToLog("2022-04-26T07:50:51.86249Z",  "2022-04-26T07:51:51.86249Z");
        addToLog("2022-04-26T07:51:49.86249Z",  "2022-04-26T07:52:49.86249Z");
        addToLog("2022-04-26T07:51:51.86249Z",  "2022-04-26T07:52:51.86249Z");
        addToLog("2022-04-26T07:52:49.86249Z",  "2022-04-26T07:53:49.86249Z");
        addToLog("2022-04-26T07:52:51.86249Z",  "2022-04-26T07:53:51.86249Z");
        addToLog("2022-04-26T07:53:49.86249Z",  "2022-04-26T07:54:49.86249Z");
        addToLog("2022-04-26T07:53:51.86249Z",  "2022-04-26T07:54:51.86249Z");
        addToLog("2022-04-26T07:54:49.86249Z",  "2022-04-26T07:55:49.86249Z");
        addToLog("2022-04-26T07:54:51.86249Z",  "2022-04-26T07:55:51.86249Z");
        addToLog("2022-04-26T07:55:51.86249Z",  "2022-04-26T07:56:17.86249Z");
        addToLog("2022-04-26T08:10:49.86249Z",  "2022-04-26T08:11:49.86249Z");
        addToLog("2022-04-26T08:10:51.86249Z",  "2022-04-26T08:11:51.86249Z");
        addToLog("2022-04-26T08:11:17.86249Z",  "2022-04-26T08:12:17.86249Z");
        addToLog("2022-04-26T08:11:44.86249Z",  "2022-04-26T08:12:44.86249Z");
        addToLog("2022-04-26T08:11:49.86249Z",  "2022-04-26T08:12:49.86249Z");
        addToLog("2022-04-26T08:11:51.86249Z",  "2022-04-26T08:12:51.86249Z");
        addToLog("2022-04-26T08:12:17.86249Z",  "2022-04-26T08:13:17.86249Z");
        addToLog("2022-04-26T08:12:44.86249Z",  "2022-04-26T08:13:44.86249Z");
        addToLog("2022-04-26T08:12:49.86249Z",  "2022-04-26T08:13:49.86249Z");
        addToLog("2022-04-26T08:12:51.86249Z",  "2022-04-26T08:13:51.86249Z");
        addToLog("2022-04-26T08:13:17.86249Z",  "2022-04-26T08:14:17.86249Z");
        addToLog("2022-04-26T08:13:44.86249Z",  "2022-04-26T08:14:44.86249Z");
        addToLog("2022-04-26T08:13:49.86249Z",  "2022-04-26T08:14:49.86249Z");
        addToLog("2022-04-26T08:13:51.86249Z",  "2022-04-26T08:14:51.86249Z");
        addToLog("2022-04-26T08:14:17.86249Z",  "2022-04-26T08:15:17.86249Z");
        addToLog("2022-04-26T08:14:44.86249Z",  "2022-04-26T08:15:44.86249Z");
        addToLog("2022-04-26T08:14:49.86249Z",  "2022-04-26T08:15:49.86249Z");
        addToLog("2022-04-26T08:14:51.86249Z",  "2022-04-26T08:15:51.86249Z");
        addToLog("2022-04-26T08:15:17.86249Z",  "2022-04-26T08:16:17.86249Z");
        addToLog("2022-04-26T08:15:44.86249Z",  "2022-04-26T08:16:44.86249Z");
        addToLog("2022-04-26T08:15:49.86249Z",  "2022-04-26T08:16:49.86249Z");
        addToLog("2022-04-26T08:15:51.86249Z",  "2022-04-26T08:16:51.86249Z");
        addToLog("2022-04-26T08:16:17.86249Z",  "2022-04-26T08:17:17.86249Z");
        addToLog("2022-04-26T08:16:44.86249Z",  "2022-04-26T08:17:44.86249Z");
        addToLog("2022-04-26T08:16:49.86249Z",  "2022-04-26T08:17:49.86249Z");
        addToLog("2022-04-26T08:16:51.86249Z",  "2022-04-26T08:17:51.86249Z");
        addToLog("2022-04-26T08:17:17.86249Z",  "2022-04-26T08:18:17.86249Z");
        addToLog("2022-04-26T08:17:44.86249Z",  "2022-04-26T08:18:44.86249Z");
        addToLog("2022-04-26T08:17:49.86249Z",  "2022-04-26T08:18:49.86249Z");
        addToLog("2022-04-26T08:17:51.86249Z",  "2022-04-26T08:18:51.86249Z");
        addToLog("2022-04-26T08:18:17.86249Z",  "2022-04-26T08:19:17.86249Z");
        addToLog("2022-04-26T08:18:44.86249Z",  "2022-04-26T08:19:44.86249Z");
        addToLog("2022-04-26T08:18:49.86249Z",  "2022-04-26T08:19:49.86249Z");
        addToLog("2022-04-26T08:18:51.86249Z",  "2022-04-26T08:19:51.86249Z");
        addToLog("2022-04-26T08:19:17.86249Z",  "2022-04-26T08:20:17.86249Z");
        addToLog("2022-04-26T08:19:44.86249Z",  "2022-04-26T08:20:44.86249Z");
        addToLog("2022-04-26T08:19:49.86249Z",  "2022-04-26T08:20:49.86249Z");
        addToLog("2022-04-26T08:19:51.86249Z",  "2022-04-26T08:20:51.86249Z");
        addToLog("2022-04-26T08:20:17.86249Z",  "2022-04-26T08:21:17.86249Z");
        addToLog("2022-04-26T08:20:44.86249Z",  "2022-04-26T08:21:44.86249Z");
        addToLog("2022-04-26T08:20:49.86249Z",  "2022-04-26T08:21:49.86249Z");
        addToLog("2022-04-26T08:20:51.86249Z",  "2022-04-26T08:21:51.86249Z");
        addToLog("2022-04-26T08:21:17.86249Z",  "2022-04-26T08:22:17.86249Z");
        addToLog("2022-04-26T08:21:44.86249Z",  "2022-04-26T08:22:44.86249Z");
        addToLog("2022-04-26T08:21:49.86249Z",  "2022-04-26T08:22:49.86249Z");
        addToLog("2022-04-26T08:21:51.86249Z",  "2022-04-26T08:22:51.86249Z");
        addToLog("2022-04-26T08:22:17.86249Z",  "2022-04-26T08:23:17.86249Z");
        addToLog("2022-04-26T08:22:44.86249Z",  "2022-04-26T08:23:44.86249Z");
        addToLog("2022-04-26T08:22:49.86249Z",  "2022-04-26T08:23:49.86249Z");
        addToLog("2022-04-26T08:22:51.86249Z",  "2022-04-26T08:23:51.86249Z");
        addToLog("2022-04-26T08:23:17.86249Z",  "2022-04-26T08:24:17.86249Z");
        addToLog("2022-04-26T08:23:44.86249Z",  "2022-04-26T08:24:44.86249Z");
        addToLog("2022-04-26T08:23:49.86249Z",  "2022-04-26T08:24:49.86249Z");
        addToLog("2022-04-26T08:23:51.86249Z",  "2022-04-26T08:24:51.86249Z");
        addToLog("2022-04-26T08:24:17.86249Z",  "2022-04-26T08:25:17.86249Z");
        addToLog("2022-04-26T08:24:44.86249Z",  "2022-04-26T08:25:44.86249Z");
        addToLog("2022-04-26T08:24:49.86249Z",  "2022-04-26T08:25:49.86249Z");
        addToLog("2022-04-26T08:24:51.86249Z",  "2022-04-26T08:25:51.86249Z");
        addToLog("2022-04-26T08:25:17.86249Z",  "2022-04-26T08:26:17.86249Z");
        addToLog("2022-04-26T08:25:44.86249Z",  "2022-04-26T08:26:44.86249Z");
        addToLog("2022-04-26T08:25:49.86249Z",  "2022-04-26T08:26:49.86249Z");
        addToLog("2022-04-26T08:25:51.86249Z",  "2022-04-26T08:26:51.86249Z");
        addToLog("2022-04-26T08:26:17.86249Z",  "2022-04-26T08:27:17.86249Z");
        addToLog("2022-04-26T08:26:44.86249Z",  "2022-04-26T08:27:44.86249Z");
        addToLog("2022-04-26T08:26:49.86249Z",  "2022-04-26T08:27:49.86249Z");
        addToLog("2022-04-26T08:26:51.86249Z",  "2022-04-26T08:27:51.86249Z");
        addToLog("2022-04-26T08:27:17.86249Z",  "2022-04-26T08:28:17.86249Z");
        addToLog("2022-04-26T08:27:44.86249Z",  "2022-04-26T08:28:44.86249Z");
        addToLog("2022-04-26T08:27:49.86249Z",  "2022-04-26T08:28:49.86249Z");
        addToLog("2022-04-26T08:27:51.86249Z",  "2022-04-26T08:28:51.86249Z");
        addToLog("2022-04-26T08:28:17.86249Z",  "2022-04-26T08:29:17.86249Z");
        addToLog("2022-04-26T08:28:44.86249Z",  "2022-04-26T08:29:44.86249Z");
        addToLog("2022-04-26T08:28:49.86249Z",  "2022-04-26T08:29:49.86249Z");
        addToLog("2022-04-26T08:28:51.86249Z",  "2022-04-26T08:29:51.86249Z");
        addToLog("2022-04-26T08:29:17.86249Z",  "2022-04-26T08:30:17.86249Z");
        addToLog("2022-04-26T08:29:44.86249Z",  "2022-04-26T08:30:44.86249Z");
        addToLog("2022-04-26T08:29:49.86249Z",  "2022-04-26T08:30:49.86249Z");
        addToLog("2022-04-26T08:29:51.86249Z",  "2022-04-26T08:30:51.86249Z");
        addToLog("2022-04-26T08:30:17.86249Z",  "2022-04-26T08:31:17.86249Z");
        addToLog("2022-04-26T08:30:44.86249Z",  "2022-04-26T08:31:44.86249Z");
        addToLog("2022-04-26T08:30:49.86249Z",  "2022-04-26T08:31:49.86249Z");
        addToLog("2022-04-26T08:30:51.86249Z",  "2022-04-26T08:31:51.86249Z");
        addToLog("2022-04-26T08:31:17.86249Z",  "2022-04-26T08:32:17.86249Z");
        addToLog("2022-04-26T08:31:44.86249Z",  "2022-04-26T08:32:44.86249Z");
        addToLog("2022-04-26T08:31:49.86249Z",  "2022-04-26T08:32:49.86249Z");
        addToLog("2022-04-26T08:31:51.86249Z",  "2022-04-26T08:32:51.86249Z");
        addToLog("2022-04-26T08:32:17.86249Z",  "2022-04-26T08:33:17.86249Z");
        addToLog("2022-04-26T08:32:44.86249Z",  "2022-04-26T08:33:44.86249Z");
        addToLog("2022-04-26T08:32:49.86249Z",  "2022-04-26T08:33:49.86249Z");
        addToLog("2022-04-26T08:32:51.86249Z",  "2022-04-26T08:33:51.86249Z");
        addToLog("2022-04-26T08:33:17.86249Z",  "2022-04-26T08:34:17.86249Z");
        addToLog("2022-04-26T08:33:44.86249Z",  "2022-04-26T08:34:44.86249Z");
        addToLog("2022-04-26T08:33:49.86249Z",  "2022-04-26T08:34:49.86249Z");
        addToLog("2022-04-26T08:33:51.86249Z",  "2022-04-26T08:34:51.86249Z");
        addToLog("2022-04-26T08:34:17.86249Z",  "2022-04-26T08:35:17.86249Z");
        addToLog("2022-04-26T08:34:44.86249Z",  "2022-04-26T08:35:44.86249Z");
        addToLog("2022-04-26T08:34:49.86249Z",  "2022-04-26T08:35:49.86249Z");
        addToLog("2022-04-26T08:34:51.86249Z",  "2022-04-26T08:35:51.86249Z");
        addToLog("2022-04-26T08:35:17.86249Z",  "2022-04-26T08:36:17.86249Z");
        addToLog("2022-04-26T08:35:44.86249Z",  "2022-04-26T08:36:44.86249Z");
        addToLog("2022-04-26T08:35:49.86249Z",  "2022-04-26T08:36:49.86249Z");
        addToLog("2022-04-26T08:35:51.86249Z",  "2022-04-26T08:36:51.86249Z");
        addToLog("2022-04-26T08:36:17.86249Z",  "2022-04-26T08:37:17.86249Z");
        addToLog("2022-04-26T08:36:44.86249Z",  "2022-04-26T08:37:44.86249Z");
        addToLog("2022-04-26T08:36:49.86249Z",  "2022-04-26T08:37:49.86249Z");
        addToLog("2022-04-26T08:36:51.86249Z",  "2022-04-26T08:37:51.86249Z");
        addToLog("2022-04-26T08:37:17.86249Z",  "2022-04-26T08:38:17.86249Z");
        addToLog("2022-04-26T08:37:44.86249Z",  "2022-04-26T08:38:44.86249Z");
        addToLog("2022-04-26T08:37:49.86249Z",  "2022-04-26T08:38:49.86249Z");
        addToLog("2022-04-26T08:37:51.86249Z",  "2022-04-26T08:38:51.86249Z");
        addToLog("2022-04-26T08:38:17.86249Z",  "2022-04-26T08:39:17.86249Z");
        addToLog("2022-04-26T08:38:44.86249Z",  "2022-04-26T08:39:44.86249Z");
        addToLog("2022-04-26T08:38:49.86249Z",  "2022-04-26T08:39:49.86249Z");
        addToLog("2022-04-26T08:38:51.86249Z",  "2022-04-26T08:39:51.86249Z");
        addToLog("2022-04-26T08:39:17.86249Z",  "2022-04-26T08:40:17.86249Z");
        addToLog("2022-04-26T08:39:44.86249Z",  "2022-04-26T08:40:44.86249Z");
        addToLog("2022-04-26T08:39:49.86249Z",  "2022-04-26T08:40:49.86249Z");
        addToLog("2022-04-26T08:39:51.86249Z",  "2022-04-26T08:40:51.86249Z");
        addToLog("2022-04-26T08:40:17.86249Z",  "2022-04-26T08:41:17.86249Z");
        addToLog("2022-04-26T08:40:44.86249Z",  "2022-04-26T08:41:44.86249Z");
        addToLog("2022-04-26T08:40:49.86249Z",  "2022-04-26T08:41:49.86249Z");
        addToLog("2022-04-26T08:40:51.86249Z",  "2022-04-26T08:41:51.86249Z");
        addToLog("2022-04-26T08:41:17.86249Z",  "2022-04-26T08:42:17.86249Z");
        addToLog("2022-04-26T08:41:44.86249Z",  "2022-04-26T08:42:44.86249Z");
        addToLog("2022-04-26T08:41:49.86249Z",  "2022-04-26T08:42:49.86249Z");
        addToLog("2022-04-26T08:41:51.86249Z",  "2022-04-26T08:42:51.86249Z");
        addToLog("2022-04-26T08:42:17.86249Z",  "2022-04-26T08:43:17.86249Z");
        addToLog("2022-04-26T08:42:44.86249Z",  "2022-04-26T08:43:44.86249Z");
        addToLog("2022-04-26T08:42:49.86249Z",  "2022-04-26T08:43:49.86249Z");
        addToLog("2022-04-26T08:42:51.86249Z",  "2022-04-26T08:43:51.86249Z");
        addToLog("2022-04-26T08:43:17.86249Z",  "2022-04-26T08:44:17.86249Z");
        addToLog("2022-04-26T08:43:44.86249Z",  "2022-04-26T08:44:44.86249Z");
        addToLog("2022-04-26T08:43:49.86249Z",  "2022-04-26T08:44:49.86249Z");
        addToLog("2022-04-26T08:43:51.86249Z",  "2022-04-26T08:44:51.86249Z");
        addToLog("2022-04-26T08:44:17.86249Z",  "2022-04-26T08:45:17.86249Z");
        addToLog("2022-04-26T08:44:44.86249Z",  "2022-04-26T08:45:44.86249Z");
        addToLog("2022-04-26T08:44:49.86249Z",  "2022-04-26T08:45:49.86249Z");
        addToLog("2022-04-26T08:44:51.86249Z",  "2022-04-26T08:45:51.86249Z");
        addToLog("2022-04-26T08:45:17.86249Z",  "2022-04-26T08:46:17.86249Z");
        addToLog("2022-04-26T08:45:44.86249Z",  "2022-04-26T08:46:44.86249Z");
        addToLog("2022-04-26T08:45:49.86249Z",  "2022-04-26T08:46:49.86249Z");
        addToLog("2022-04-26T08:45:51.86249Z",  "2022-04-26T08:46:51.86249Z");
        addToLog("2022-04-26T08:46:17.86249Z",  "2022-04-26T08:47:17.86249Z");
        addToLog("2022-04-26T08:46:44.86249Z",  "2022-04-26T08:47:44.86249Z");
        addToLog("2022-04-26T08:46:49.86249Z",  "2022-04-26T08:47:49.86249Z");
        addToLog("2022-04-26T08:46:51.86249Z",  "2022-04-26T08:47:51.86249Z");
        addToLog("2022-04-26T08:47:17.86249Z",  "2022-04-26T08:48:17.86249Z");
        addToLog("2022-04-26T08:47:44.86249Z",  "2022-04-26T08:48:44.86249Z");
        addToLog("2022-04-26T08:47:49.86249Z",  "2022-04-26T08:48:49.86249Z");
        addToLog("2022-04-26T08:47:51.86249Z",  "2022-04-26T08:48:51.86249Z");
        addToLog("2022-04-26T08:48:17.86249Z",  "2022-04-26T08:49:17.86249Z");
        addToLog("2022-04-26T08:48:44.86249Z",  "2022-04-26T08:49:44.86249Z");
        addToLog("2022-04-26T08:48:49.86249Z",  "2022-04-26T08:49:49.86249Z");
        addToLog("2022-04-26T08:48:51.86249Z",  "2022-04-26T08:49:51.86249Z");
        addToLog("2022-04-26T08:49:17.86249Z",  "2022-04-26T08:50:17.86249Z");
        addToLog("2022-04-26T08:49:44.86249Z",  "2022-04-26T08:50:44.86249Z");
        addToLog("2022-04-26T08:49:49.86249Z",  "2022-04-26T08:50:49.86249Z");
        addToLog("2022-04-26T08:49:51.86249Z",  "2022-04-26T08:50:51.86249Z");
        addToLog("2022-04-26T08:50:17.86249Z",  "2022-04-26T08:51:17.86249Z");
        addToLog("2022-04-26T08:50:44.86249Z",  "2022-04-26T08:51:44.86249Z");
        addToLog("2022-04-26T08:50:49.86249Z",  "2022-04-26T08:51:49.86249Z");
        addToLog("2022-04-26T08:50:51.86249Z",  "2022-04-26T08:51:51.86249Z");
        addToLog("2022-04-26T08:51:17.86249Z",  "2022-04-26T08:52:17.86249Z");
        addToLog("2022-04-26T08:51:44.86249Z",  "2022-04-26T08:52:44.86249Z");
        addToLog("2022-04-26T08:51:49.86249Z",  "2022-04-26T08:52:49.86249Z");
        addToLog("2022-04-26T08:51:51.86249Z",  "2022-04-26T08:52:51.86249Z");
        addToLog("2022-04-26T08:52:17.86249Z",  "2022-04-26T08:53:17.86249Z");
        addToLog("2022-04-26T08:52:44.86249Z",  "2022-04-26T08:53:44.86249Z");
        addToLog("2022-04-26T08:52:49.86249Z",  "2022-04-26T08:53:49.86249Z");
        addToLog("2022-04-26T08:52:51.86249Z",  "2022-04-26T08:53:51.86249Z");
        addToLog("2022-04-26T08:53:17.86249Z",  "2022-04-26T08:54:17.86249Z");
        addToLog("2022-04-26T08:53:44.86249Z",  "2022-04-26T08:54:44.86249Z");
        addToLog("2022-04-26T08:53:49.86249Z",  "2022-04-26T08:54:49.86249Z");
        addToLog("2022-04-26T08:53:51.86249Z",  "2022-04-26T08:54:51.86249Z");
        addToLog("2022-04-26T08:54:17.86249Z",  "2022-04-26T08:55:17.86249Z");
        addToLog("2022-04-26T08:54:44.86249Z",  "2022-04-26T08:55:44.86249Z");
        addToLog("2022-04-26T08:54:49.86249Z",  "2022-04-26T08:55:49.86249Z");
        addToLog("2022-04-26T08:54:51.86249Z",  "2022-04-26T08:55:51.86249Z");
        addToLog("2022-04-26T08:55:17.86249Z",  "2022-04-26T08:56:17.86249Z");
        addToLog("2022-04-26T08:55:44.86249Z",  "2022-04-26T08:56:44.86249Z");
        addToLog("2022-04-26T08:55:49.86249Z",  "2022-04-26T08:56:49.86249Z");
        addToLog("2022-04-26T08:55:51.86249Z",  "2022-04-26T08:56:51.86249Z");
        addToLog("2022-04-26T08:56:17.86249Z",  "2022-04-26T08:57:17.86249Z");
        addToLog("2022-04-26T08:56:44.86249Z",  "2022-04-26T08:57:44.86249Z");
        addToLog("2022-04-26T08:56:49.86249Z",  "2022-04-26T08:57:49.86249Z");
        addToLog("2022-04-26T08:56:51.86249Z",  "2022-04-26T08:57:51.86249Z");
        addToLog("2022-04-26T08:57:17.86249Z",  "2022-04-26T08:58:17.86249Z");
        addToLog("2022-04-26T08:57:44.86249Z",  "2022-04-26T08:58:44.86249Z");
        addToLog("2022-04-26T08:57:49.86249Z",  "2022-04-26T08:58:49.86249Z");
        addToLog("2022-04-26T08:57:51.86249Z",  "2022-04-26T08:58:51.86249Z");
        addToLog("2022-04-26T08:58:17.86249Z",  "2022-04-26T08:59:17.86249Z");
        addToLog("2022-04-26T08:58:44.86249Z",  "2022-04-26T08:59:44.86249Z");
        addToLog("2022-04-26T08:58:49.86249Z",  "2022-04-26T08:59:49.86249Z");
        addToLog("2022-04-26T08:58:51.86249Z",  "2022-04-26T08:59:51.86249Z");
        addToLog("2022-04-26T08:59:17.86249Z",  "2022-04-26T09:00:17.86249Z");
        addToLog("2022-04-26T08:59:44.86249Z",  "2022-04-26T09:00:44.86249Z");
        addToLog("2022-04-26T08:59:49.86249Z",  "2022-04-26T09:00:49.86249Z");
        addToLog("2022-04-26T08:59:51.86249Z",  "2022-04-26T09:00:51.86249Z");
        addToLog("2022-04-26T09:00:17.86249Z",  "2022-04-26T09:01:17.86249Z");
        addToLog("2022-04-26T09:00:44.86249Z",  "2022-04-26T09:01:44.86249Z");
        addToLog("2022-04-26T09:00:49.86249Z",  "2022-04-26T09:01:49.86249Z");
        addToLog("2022-04-26T09:00:51.86249Z",  "2022-04-26T09:01:51.86249Z");
        addToLog("2022-04-26T09:01:17.86249Z",  "2022-04-26T09:02:17.86249Z");
        addToLog("2022-04-26T09:01:44.86249Z",  "2022-04-26T09:02:44.86249Z");
        addToLog("2022-04-26T09:01:49.86249Z",  "2022-04-26T09:02:49.86249Z");
        addToLog("2022-04-26T09:01:51.86249Z",  "2022-04-26T09:02:51.86249Z");
        addToLog("2022-04-26T09:02:51.86249Z",  "2022-04-26T09:03:06.86249Z");

        assertThat(timeLog.getTotalTime(Instant.parse("2022-04-26T00:00:01.000Z"), Instant.parse("2022-04-26T23:59:59.000Z")))
                .isEqualTo(Duration.ofMinutes(10));
    }

    private void addToLog(String fromString, String toString) {
        timeLog.log(Instant.parse(fromString), Instant.parse(toString));
    }

//    Don't think I need this because time is moving forward so logging overlapping periods should not be possible
//    @Test
//    public void overlappingPeriodsAreConsolidated() {
//        Instant start = Instant.now();
//        timeLog.add(start, start.plus(Duration.ofSeconds(20)));
//        timeLog.add(start.plus(Duration.ofSeconds(10)), start.plus(Duration.ofSeconds(25)));
//        assertThat(timeLog.getTotalTime(start, start.plus(Duration.ofSeconds(25)))).isEqualTo(Duration.ofSeconds(25));
//    }
}
